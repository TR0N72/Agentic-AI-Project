# Pinterin Database and API

This project contains the database and API for the Pinterin application, as outlined in the project blueprint.

## Architecture

The project uses a hybrid database architecture:

*   **PostgreSQL:** Serves as the primary relational database (OLTP) for storing structured data like users, questions, and answers.
*   **Qdrant:** A vector database used to store embeddings of the questions, enabling powerful semantic search capabilities.
*   **FastAPI:** A modern Python web framework used to create the REST API for interacting with the databases.

## Setup

1.  **Environment Variables:**
    Create a `.env` file in the root of the `database` directory and populate it with the necessary credentials for PostgreSQL, Qdrant, and OpenAI:

    ```
    POSTGRES_HOST=localhost
    POSTGRES_PORT=5432
    POSTGRES_DB=pinterin
    POSTGRES_USER=postgres
    POSTGRES_PASSWORD=postgres

    QDRANT_HOST=localhost
    QDRANT_PORT=6333

    
    ```

2.  **Install Dependencies:**
    Install all the required Python packages using pip:

    ```bash
    pip install -r req.txt
    ```

3.  **Set up the Databases:**
    You need to have PostgreSQL and Qdrant instances running. Then, run the following scripts to initialize the database schema and collections:

    *   **Create Qdrant Collection:**
        ```bash
        python -m qdrant.create_collections
        ```

    *   **Create PostgreSQL Schema and Insert Mock Data:**
        The `schema.sql` is applied and mock data is inserted by the `insert_mock_data.py` script.
        ```bash
        python -m postgres.insert_mock_data
        ```

## Running the API

To run the FastAPI server, use `uvicorn`:

```bash
uvicorn api_main:app --reload
```

The API will be available at `http://127.0.0.1:8000`.

## API Documentation

The API documentation is automatically generated by FastAPI using Swagger UI. You can access it at:

[http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)
